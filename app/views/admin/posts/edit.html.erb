<div class="wrapper">
	<h2>Edit Post</h2>
	
	<% if @post && @post.errors.any? %>
		<div class="error_messages">
			<h2>Invalid Submission</h2>
			<ul>
				<% for message in @post.errors.full_messages %>
					<li><%= message %></li>
				<% end %>
			</ul>
		</div>	
	<% end %>
		
	<%= form_for(:post, :url=>{:action => 'update', :id => @post.id}, :method => :put) do |f| %>		
		<%= f.label :title %>
		<%= f.text_field :title %>
		<%= f.label :body, "Post" %>
		<%= f.text_area :body %>
		<%= f.hidden_field(:status) %>
		
		<%
			# Save with status 1 (published)
			# If post is draft, display "Publish", else "Update"
		%>	
		<% if @post.status == 0 %>
			<%= f.submit "Publish", :class => "cta submit" %>
		<% else %>
			<%= f.submit "Update", :class => "cta submit" %>
		<% end %>
		
		<%= 
			# Save with status 0 (draft)		
			f.submit "Save for later", {:class => "cta  submit", :id => "save"}
		%>						
		<%= link_to "Cancel", dashboard_path, {:class => "cta", :id => "cancel"}%>
		
	<% end %>	
</div>