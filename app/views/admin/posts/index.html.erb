<% provide(:title, "All Posts") %>

<h2>Posts</h2>

<%= render_flashes(flash) %>

<table>
	<% if (!@posts or @posts.blank?) %>
		<td>You haven't added any content yet! Click <%= link_to "here", new_admin_post_path %> to get started.</td>				
	<% else %>	
		<tr>
			<th>Title</th>
			<th>Author</th>
			<th>Date</th>
			<th>Tags</th>
			<th>Status</th>
			<th>Actions</th>
		</tr>
		
		<% @posts.each do |post| %>
			<tr class="<%= cycle('odd', 'even') %>">
				<td>					
					<%= 						
						link_to post.title, post_path(post.id), :class => "plain"
					%>									
				</td>
				<td>
					<% if !post.user_id.nil? %>									
					<%= link_to render_username(post.user_id), admin_user_path(:id => post.user_id) %>
					<% else %>
						nil id
					<% end %>
				</td>
				<td>
					<%= render_sutro_time(post.created_at) %>
				</td>
				<td>
					<% if post.tags.nil? || post.tags.blank? %>
						-
					<% else %>
						<%= render_tags(post.tags) %>																															
					<% end %>							
				</td>
				<td>
					<%= render_status_pill(post.status) %>
				</td>
				<td>
					<%= link_to "Edit", edit_admin_post_path(post.id) %>
					&nbsp;
					<%= link_to "Delete", {:action => 'destroy', :id => post.id}, 
						{:method => :delete, confirm: "Are you sure you want to delete this post?"} %> 
				</td>
			</tr>
		<% end %>
	<% end %>
	
</table>

<%= 
	# Display pagination links
	will_paginate @posts 
%>