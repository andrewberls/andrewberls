<h2>Posts by <%= render_username @user.id %></h2>

<% if flash[:type] == "action" %>
	<p class="action_success"><%= flash[:msg] %></p>
<% end %>

<table>
	<% if (!@posts or @posts.blank?) %>
		<td>You haven't added any content yet! Click <%= link_to "here", new_admin_post_path %> to get started.</td>				
	<% else %>	
		<tr>
			<th>Title</th>
			<th>Author</th>
			<th>Date</th>
			<th>Tags</th>
			<th>Status</th>
			<th>Actions</th>
		</tr>
		
		<% @posts.each do |post| %>
			<tr class="<%= cycle('odd', 'even') %>">
				<td>
					<%= 
						raw post.title
					%>
				</td>
				<td>
					<% if !post.user_id.nil? %>									
					<%=
						render_username(@user.id)					
					%>
					<% else %>
						nil id
					<% end %>			
				</td>
				<td>
					<%= render_sutro_time(post.created_at) %>
				</td>
				<td>
					<% if post.tags.nil? || post.tags.blank? %>
						-
					<% else %>				
						<%= render_tags(post.tags) %>
					<% end %>									
				</td>
				<td>
					<%= render_status(post.status) %>
				</td>
				<td>
					<% if current_user.id == @user.id %>
						<%= link_to "Edit", edit_admin_post_path(post.id) %>
						&nbsp;
						<%= link_to "Delete", {:controller => "admin/posts", :action => 'destroy', :id => post.id}, 
							{:method => :delete, confirm: "Are you sure you want to delete this post?"}
						%>
					<% end %>
				</td>
			</tr>
		<% end %>
	<% end %>
	
</table>

<%= 
	# Display pagination links
	will_paginate @posts 
%>